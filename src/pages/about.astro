---
import { getCollection } from "astro:content";
import { Picture } from "astro:assets";
import Layout from "@layouts/Layout.astro";
import Container from "@components/container.astro";
import Sectionhead from "@components/sectionhead.astro";

// Filter team entries with 'draft: false' & date before current date
const publishedTeamMembers = await getCollection("team", ({ data }) => {
  return !data.draft && data.publishDate < new Date();
});
---

<Layout title="About">
  <Container>
    <Sectionhead>
      <Fragment slot="title">About</Fragment>
      <Fragment slot="desc">CS AI and integrations experts.</Fragment>
    </Sectionhead>

    <div class="mx-auto mt-16 flex max-w-4xl flex-col gap-3">
      <p class="text-lg leading-relaxed text-slate-500">
        We're a team of CS automation experts with almost a decade of
        support-related technical experience. Our mission is to empower CS teams
        with AI technology and integrations that reduce response times to zero,
        enhance the overall customer experience, and improve your employee
        experience. Let us help you stay ahead of the curve and achieve your
        support goals.
      </p>
    </div>
    <div class="mx-auto mt-12 grid max-w-4xl gap-10 md:grid-cols-3">
      {
        publishedTeamMembers.map((teamMemberEntry) => (
          <div class="group">
            <div class="aspect-square w-full">
              <Picture
                src={teamMemberEntry.data.avatar.src}
                alt={teamMemberEntry.data.avatar.alt}
                width={400}
                height={400}
                sizes="(max-width: 800px) 100vw, 400px"
                widths={[200, 400]}
                class="w-full rounded transition"
              />
            </div>

            <div class="mt-4 text-center">
              <h2 class="text-lg text-gray-800">{teamMemberEntry.data.name}</h2>
              <h3 class="text-sm text-slate-500">
                {teamMemberEntry.data.title}
              </h3>
            </div>
          </div>
        ))
      }
    </div>
  </Container>
</Layout>
